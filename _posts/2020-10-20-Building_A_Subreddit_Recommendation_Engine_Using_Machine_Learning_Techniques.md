---
layout: post
title: Building A Subreddit Recommendation Engine Using Machine Learning Techniques
subtitle: Subreddit Recommender For Posts
gh-repo: skhabiri/SubReddit-Recommender
gh-badge: [star, fork, follow]
tags: [Machine Learning, TF-IDF Vectorizer, spaCy, NLP, Reddit, PRAW API]
image: /assets/img/post6/post6_blockdiagram.png
comments: false
---

Whenever a user submit a post to Reddit, The poster is required to submit it to some subreddit. A subreddit is topic/interest specific link aggregation pages with posts related to that topic. Reddit provides a default list of popular subreddits for the user to submit the post to. If none of those subreddits are appropriate, the user can choose to search for a different subreddit and submit it there. In this article we discuss ML models that use NLP techniques to generate a better list of subreddit recommendations based the post information. More specifically, the input is a text as a string or multiple texts in an iterable format such as ndarray or list, and return value is a list of recommended Subreddit categories from a list of pre-selected categories that the model has been trained on.

### Scraping Reddit data
In order to train any model first we need to collect the training and validation data. As its name suggests [PRAW](https://praw.readthedocs.io) is a Python wrapper for the Reddit API, which enables to scrape data from subreddits. For package management and reproducibility we use conda environment. 
PRAW can be installed using conda-forge channel:
```
conda install -c conda-forge praw
```
A python file connects to PRAW python API for Reddit and pulls information from 1000 posts in each of the 44 selected subreddit categories. The pulled information includes: `subreddit name`, `subreddit id`, `title`, and `post body`. The pulled information are stored in a local sql database.
The created database contains 51610 rows and 4 columns. 
```
import sqlite3
conn = sqlite3.connect('subreddit_db.sqlite3')
c = conn.cursor()
c.execute('''create table submission_table (
               subreddit_name text,
               subreddit_id text,
               title text,
               text text
             )
             ''')
```
Before `praw` can be used to scrape data we need to authenticate ourselves. For this we need to create a Reddit instance and provide it with a client_id , client_secret and a user_agent .
```
import praw
import os
from dotenv import load_dotenv

# instantiate praw
load_dotenv()
reddit = praw.Reddit(client_id=os.getenv('CLIENT_ID'),
                     client_secret=os.getenv('CLIENT_SECRET'),
                     user_agent='veggiecode')
```
The model recommendation is limited to a selected number of subreddit categories that the model is trained on. Hence we pull data for those specific subreddits.
```
import time

sleep_min = 2
sleep_max = 5
start_time = time.time()

# sub_list is the list of pre selected categories
for name in sub_list:
    subreddit = reddit.subreddit(name)
    records = []
    for submission in subreddit.top(limit=1000):
        records.append([subreddit.display_name, subreddit.id, submission.title, submission.selftext])
    print(records[0])
    c.executemany('''insert into submission_table
                  (subreddit_name, subreddit_id, title, text)
                  values (?, ?, ?, ?)
                  ''', records)
    conn.commit()
    subreddit_count += 1
    if subreddit_count % 5 == 0:
        time.sleep(np.random.uniform(sleep_min, sleep_max))


c.close()
conn.close()
```
### Data Cleaning:
For cleaning data first import the stored data into a notebook.
```
data = pd.read_sql_query("select * from submission_table order by random() limit 100000;", conn)
# subreddit_subs: is the number of subscriber in the subreddit category
print(data.shape)
(51610, 4)
```
Here is a sample of the data:

<table border="1" class="dataframe" style="overflow-x: scroll;display: block; max-height: 300px;"><thead><tr style="text-align: right;"><th></th><th>subreddit_name</th><th>subreddit_id</th><th>title</th><th>text</th></tr></thead><tbody><tr><th>0</th><td>literature</td><td>2qhps</td><td>James Franco's poems: hard to forgive</td><td></td></tr><tr><th>1</th><td>technology</td><td>2qh16</td><td>Predator Drone Spotted in Minneapolis During George Floyd Protests</td><td></td></tr><tr><th>2</th><td>DIY</td><td>2qh7d</td><td>I restored a $5 Kitchen Aid mixer I found at the thrift store</td><td></td></tr><tr><th>3</th><td>news</td><td>2qh3l</td><td>Alabama just passed a near-total abortion ban with no exceptions for rape or incest</td><td></td></tr><tr><th>4</th><td>Parenting</td><td>2qhn3</td><td>I thought my 6 year old was doing one of his math activities on the tablet, but nah</td><td>My 6 year old has a bunch of new apps and activities that his teacher sent us to put on his tablet. He's been occasionally asking me, from the other room, the answers to different math problems, like what's 12+7 or what's 22-8.  I'm like sweet he's doing his math! Nope. He's trying to bypass the parental locks on kids YouTube so he can watch shit that is blocked. He keeps exiting out and going back in which is I assume why he had to ask multiple times.</td></tr></tbody></table>

The database contains 51610 rows and 4 columns.
```
 #   Column          Non-Null Count  Dtype 
---  ------          --------------  ----- 
 0   subreddit_name  51610 non-null  object
 1   subreddit_id    51610 non-null  object
 2   title           51610 non-null  object
 3   text            51610 non-null  object
 ```
Let's check the unique categories in our collected data:
```
 subreddit_names = data['subreddit_name'].unique()
len(subreddit_names), subreddit_names
 ```
 Our created dataset consists of 53 categories.
 ```
 (53,
 array(['literature', 'technology', 'DIY', 'news', 'Parenting', 'cars',
        'WTF', 'MachineLearning', 'socialskills', 'Art', 'biology',
        'politics', 'personalfinance', 'sports', 'worldpolitics',
        'Documentaries', 'food', 'LifeProTips', 'movies',
        'TwoXChromosomes', 'nottheonion', 'mildlyinteresting', 'Health',
        'AskReddit', 'history', 'Cooking', 'Music', 'Fitness',
        'GetMotivated', 'Design', 'gaming', 'entertainment', 'television',
        'books', 'JusticeServed', 'math', 'investing', 'science',
        'camping', 'Coronavirus', 'PublicFreakout', 'travel', 'funny',
        'HomeImprovement', 'scifi', 'worldnews', 'AdviceAnimals',
        'programming', 'gadgets', 'conspiracy', 'space', 'Showerthoughts',
        'announcements'], dtype=object))
 ```
 Let's look at number of posts per subreddit category.
 ```
sns.histplot(
    x=data['subreddit_name'].astype('category').cat.codes, 
    bins=data['subreddit_id'].nunique(),
    kde=True)
 ```
 <img src= "../assets/img/post7/post7_subredditposts.png">

Ideally we would use the entire dataset for the training. However for practical reasons that would substantially increase the size of the serialized model and complicate the deployment of the model. For this reason we are going to use a smaller subset of the dataset for training. 
The above graph shows that we have about 1000 posts per subreddit category as expected. However some the posts might have small amount of text that would not be sufficient for our natural language processing. 
Hence we choose the posts that have enough text content. Later on we are going to choose only the categories (features) that  have enough number of posts (instances) to train on.

To get an idea of the posts lengths, let's plot the average length of posts per subreddit category.
```
post_mean = data1.groupby(by='subreddit_name').apply(lambda x: x['text_length'].mean())
plt.figure(figsize=(8,4))
ax = sns.barplot(x=post_mean.index, y=post_mean.values)
ax.set(xlabel='Subreddit Category', ylabel='Average length of posts')
ax.set(xticklabels=[])
plt.show()
```
<img src= "../assets/img/post7/post7_postlength_avg.png">

The above graph shows the average length of posts is not the same in different subreddit categories.
After filtering the low count subreddit categories we end up with 44 categories and 4400 posts. We take a note that in a production setup we need more training data to achieve a reliable results.

### Machine Learning Model
The model is supposed to recieve a text as a post content and classify it to one of the 44 subreddit categories. We consider a random classifier as baseline with an accuracy of 1/44, which is very low. To build our model we use a two stage pipeline. The first stage encodes the text into a numerical format and the the seconf stage classifies the text into one of the target labels.

#### spaCy Embedding
For the first stage of the pipeline we are going to use [spaCy](https://spacy.io) embedding. spaCy is an open-source software library for natural language processing. spaCy performs two major tasks for us, tokenizing and vectorizing. The `tokenizer` is a component that segments texts into tokens. In spaCy, it's rule-based and not trainable. It looks at whitespace and punctuation to determine which are the unique tokens in a sentence. The `tok2vec` layer is a machine learning component that learns how to produce context-based vectors for tokens. It does this by looking at lexical attributes of the token. The tok2vec component is already pretrained from external vectors data. The external vectors data already embeds some "meaning" or "similarity" of the tokens. 
```
import spacy
from spacy.tokenizer import Tokenizer
from spacy.lang.en.stop_words import STOP_WORDS
#Create the nlp object
nlp = spacy.load("en_core_web_md")
```
the `en_core_web_md` model has 685k keys, 20k unique vectors of 300 dimensions. We can define a function to embed the text and use it in a Scikit-learn `FunctionTransformer` as the first stage of the pipeline.
```
# Spacy embedding
def get_word_vectors(docs):
    """
    docs: can be string or a list of strings
    """
    if isinstance(docs, str):
      docs = [docs]
    return np.array([nlp(str(doc)).vector for doc in docs])

# Instantiate functiontransformer of the spacy vectorizer
embed = FunctionTransformer(get_word_vectors)
```
The pipeline is defined as:
```
pipe = Pipeline([
                 ('emb', embed), 
                 ('clf', clfi)])
```
clfi is an instance of a classifier. For this work we try different classifers from `Scikit-learn` library, namely, `KNeighborsClassifier()`, `GradientBoostingClassifier()`, and `XGBClassifier()` from `xgboost` library.

#### Hyperparameter Tuning
We are going to benefit from hyperparameter tuning to optimize our model. For this purpose we use `RandomizedSearchCV()`. This would also perform the cross validation that is helpful considering the fact that our training data is rather small. Nevertheless we split the data into train and test to keep some data away to evaluate the model overfit.
```
est = {}
for key, value in est_dict.items():
  clfi = value[0]
  # print(clfi, type(clfi))
  param_dist = value[1]
  
  # spacy embedding can be taken out of the pipeline to save time in hyperparameter tunning
  pipe = Pipeline([
                   ('emb', embed), 
                   ('clf', clfi)])
  
  est["{0}_est".format(key)] = RandomizedSearchCV(pipe, 
                                                  param_distributions=param_dist, 
                                                  n_iter=4, cv=2, verbose=1)
  
  print('\n', 5*'*',' fitting',key, ' estimator..... ',5*'*')
  est["{0}_est".format(key)].fit(X_train.values, y_train.values)
  print("best params: ",est["{0}_est".format(key)].best_params_)
  print("best score: ",est["{0}_est".format(key)].best_score_)
  print("Test score: ",est["{0}_est".format(key)].score(X_test.values, y_test.values))
```
After model fit, `KNeighborsClassifier`, `GradientBoostingClassifier`, and `XGBClassifier` produce the test accuracy of 0.34, 0.51, and 0.53, respectively. Compared to our 0.02 baseline accuracy this is a huge leap forward.
It is noteworthy that here in the hyperparameter tuning for every parameter set we are repeating the embedding process. Changing the hyperparameters should not affect the embedding. This is obviousely adds to the training time and to speed up the training we could have embed the training set beforehand. On the other side for our small training dataset this is not a showstopper and it is only done once. Additionally it streamlines the later use of the trained model as we could simply feed the string text and let the trained model embed it internally. Otherwise we would have needed to preprocess any query and embed it separately before feeding it to the trained model. 


Despite having the embedding stage as a part of the trained model we can still access the specific internal methods of the classifier. For example let's take the pipeline model that includes `KNeighborsClassifier`. Let's say we want to give a random text and find the neighboring samples from the training set. First we define a function to preprocess the input text, which simply means embeding the text here.
```
# Convert input string to embedded vector
def preprocess(query, vectorize):
  """
  Vectorizes the 'query' string by spacy pretrained model (nlp). 
  the return value serves as a query to the prediction model
  """
  return vectorize(query).reshape(1,-1)
```
A `neighbors` function would recieve an embeded input and calls the `kneighbors()` method of the `KNeighborsClassifier()` to calculate the neighboring samples from the train set.
```
# Accessing the neighbors() method of the KNClassifier of the trained pipeline estimator 
def neighbors(clf, input, X_train, y_train):
  """
  input: a string type text or vectorized array or an iterable data type
  return: Dataframe of nearest neighbors and their subreddit categories
  """
  results = clf.kneighbors(input)
  neighbors_idx, neighbors_dist = results[1][0], results[0][0]
  neighbors_df = pd.concat([X_train.iloc[neighbors_idx], y_train.iloc[neighbors_idx]], axis=1)
  return neighbors_df
```
Now for a given text:
```
query = """Does this seem too advanced for first month of kindergarten?
Usually my husband is sitting with my son (working from home, but present) 
during my son's Zoom class but yesterday I did. I was really surprised by 
what the teacher was asking of the kids. My son's teacher wanted the students 
to write stories live during the zoom meeting. She expected them to write full 
sentences with words like "suddenly." She told them if they can't spell the 
words to "sound it out." She kept reminding them to use connecting words to 
transition between topics. The example story she wrote was about 5-6 sentences. 
It was about going to the playground and waiting for her turn on the swings. 
I was pretty surprised because the kids are still learning the alphabet. 
how would they be able to write sentences for before learning letters? Before we 
started school, the principal specifically told families at an info night, 
"Don't worry if your kid doesn't know the alphabet, we'll reach them!" 
So I don't think the teacher has expectations that the kids could already write."""
```
We preprocess the input text and call the neighbors function to get the minimum distance samples from teh train set.
```
vect = preprocess(query, get_word_vectors)
kneighbors = neighbors(est_best['knc']['clf'], vect, X_train, y_train)
kneighbors
```
The neighboring samples from the train set are:
<table border="1" class="dataframe" style="overflow-x: scroll;display: block;max-height: 300px;"><thead><tr style="text-align: right;"><td style="height:40px; overflow:hidden"></td><th></th><th>joint_text</th><th>subreddit_name</th></tr></thead><tbody><tr><th>49913</th><td>lpt at the beginning of every semester make a dedicated folder for your class where you download and save all documents especially the syllabus teachers try to get sneaky sometimes taught this to my sister last year she just came to me and told me about how her ap english teacher tried to pull a fast one on the entire class x200b i've had it happen to me before as well in my bachelors x200b teacher changes the syllabus to either add new rules or claim there was leniancy options that students didn't take advantage of most of the time it's harmless but sometimes it's catastrophic to people's grades x200b in my case teacher tried to act like there was a requirement people weren't meeting for their reports which was not in the original syllabus upload x200b in my sister's case the english teacher was giving nobody more than an 80 on their weekly essays so when a bunch of students complained and brought their parents he modified the syllabus to act like he always gave them the option to come in after school and re write the essays but they never took advantage of it one of my sister's friends was crying because her mom a teacher at that school was mad at her for not going in for the make up after school when confronted about this not being in the original syllabus he acted like it was always there my sister of course had the original copy downloaded and handled it like a boss now people get to make up their missed points and backdate it x200b sorry to all good teachers out there but not all teachers are as ethical as we'd like to think x200b edit ap english is in high school it's an advanced placement class equivalent to a college credit difficult but most students in there are hard working x200b final edit the goal of doing this is not to catch a teacher in their lie the reasons to make a folder dedicated for a class from day 1 and keeping copies of everything locally are too many to list they include taking ownership having records making it easy for yourself learning to be organized having external organization overcoming lack of organization in an lms helping you study offline reducing steps needed to access something annotating pdfs and many more the story here is teachers getting sneaky but i have dozens more stories to show why you should do it in general for your own good</td><td>LifeProTips</td></tr><tr><th>28021</th><td>the letter charles iii of spain wrote to his parents telling them about his wedding night in 1738 charles iii of spain https en wikipedia org wiki charles_iii_of_spain married princess maria amalia of saxony https en wikipedia org wiki maria_amalia_of_saxony daughter of polish king augustus iii and an educated cultured woman who gave birth to 13 children eight of whom reached adulthood the marriage responded to political'needs' but the couple enjoyed a romantic and harmonious union after the death of his stepbrother ferdinand vi with no descendants charles was crowned king of spain as charles iii in 1759 a year later his wife died and he never remarried charles iii remained a widower for the rest of his life without ever having a mistress in 22 years of marriage this is the first serious upset i've had from amalia the pain that this irreparable loss causes me is equal to the tender love i professed for her this is the letter that charles iii wrote to his parents in july 1738 telling them about his wedding night my very dear father and my very dear mother i was happy to know that your majesties are still doing fine me and my wife are perfectly well thank god i received a letter from your majesties on the 15th of last month in which i saw how thanks be to god your majesties had received two of my letters you assumed that by the time i received this letter my heart would be glad and i would have consummated the marriage you told me that sometimes young girls are not so easy and that with this hot weather i should try to save my energy not doing it as much as i wanted because it could ruin my health that i should be content with once or twice times between night and day that otherwise i would end up exhausted and that is better to serve the ladies little and continuously than a lot once about what you asked regarding her height i will tell your majesties that according to the portrait i have of my sister they are nothing alike with all due respect to my sister my wife is much prettier and much whiter she shoots very well and takes a lot of pleasure from hunting your majesties wrote me as parents and as married people and asked me to tell you if everything went well and if i find her to my liking both her body and her spirit so i ll tell you how it all went down the day i met her in portella we spoke lovingly until we arrived at fondi there we had dinner and then continued our journey having the same conversation until we arrived in gaeta a little late between the time she needed to get undressed and to undo her hair it was dinnertime and i couldn't do anything even though i really wanted to we went to bed at nine o'clock and both of us were shaking but we started to kiss and i was soon ready so i started and after 15 minutes i broke her her hymen this time none of us could spill ejaculate about what you told me about her being young and delicate warning me that she would make me sweat i will say that the first time i was sweating like a fountain but i have not sweat since then later at three o clock in the morning i started again and we both spilled both at the same time and since then we have continued like this doing it two times a night except for the night when we had to come here since we had to wake up at four o clock in the morning and we could only do it once i assure you that i could have done it many more times but i m controlling myself as you advised i will also say that we always spill at the same time because we always wait for each other she is the most beautiful girl in the world she has the spirit of an angel and the best disposition i am the happiest man in the world having this woman who will be my companion for the rest of my life your majesties told me that you were eagerly waiting to find out if you were going to have grandchildren i ll tell your majesties that she doesn t have her period yet but by all appearances she will soon because four days ago she started leaving some stains of this material they say precedes the period my wife begs me to place her with the utmost submission at the feet of your majesties source aprender del pasado apuntes de cultura histórica https books google es books about aprender_del_pasado html id 0nqvgqaacaaj redir_esc y by josé manuel pina piquer translated by me with some help from google so sorry in advance for the mistakes original letter in spanish thanks u elbroet https www reddit com r history comments 8ekmp2 the_letter_charles_iii_of_spain_wrote_to_his dxwn8fb</td><td>history</td></tr><tr><th>35380</th><td>in 1945 my lawyer grandfather apparently had written to his childhood friend who was serving in wwii complaining about his job his friend rightfully so wrote this scathing response from the philippines note my grandfather passed away last fall and we're still going through his belongings he saved many correspondence some are hard to read because the letters are handwritten and nearly 80 years old however i just came across this letter i've seen other letters from this same guy and i know he grew up in the same neighborhood with my grandfather although my grandfather and this guy went to different schools their entire lives they kept in touch while the friend was serving in ww2 i hadn't gotten a chance to read any letters until tonight and this was the first one i read and it's intense you'll get this when you read but it seems that my attorney grandfather had written to his friend complaining about how busy and hard his job was well as you might imagine his friend while serving in the philippines in ww2 was pretty pissed about that and he didn't hold back ps thanks to commenters who are better versed in ww2 and better at reading the handwriting than i am i'm making corrections and edits as they come in here's the link to the original letter http imgur com a wmrsu and here's the full transcription philippine islands july 25 1945 stan from out of the philippines where it my dear lawyer is still spelled with 1 l i send a reply to one of the foulest notes that it has ever been my misfortune to receive quote as for myself i have been very busy the last week or two although the course of work in this hard boiled slave driving under paid profession etc etc well little boy you may be a shining light in the tiny legal world you exist in but the insinuation you made in your letter showed me that you don't know what life today is all about you are living in a sphere that is bound up with things cut and dried things which are dealt with as cases and not realities and yet you have the impudent gall to sit back and complain about your own way of life you who have always had a good home fine parents and sufficient funds you attended a private school a college and a law school in spite of the times you got a job in an old firm and you have your place in life in other words you have had everything handed to you on a silver platter and yet you still complain you also speak of being busy well that is a joke it seems to me that i have heard of some others who are busy today have you heard of the b 29 boys over japan or the carrier task force or the boys who took back the philippines or the 19 000 boys who had a busy time on okinawa or the guys on saipan guam new guinea or guadalcanal or course the aussies are not busy on borneo of course not no these guys and millions of others are merely sitting around finely furnished offices and telling others they have been very busy as for being hard boiled there is no such thing in the service all those with whom we associate treat us like their own children things are always calm and serene the cases one finds are never crude or tough the stinking corpses of american boys boys whom life never gave a chance are nice things to observe no life in this business is not hard boiled if it isn't then neither is a sniper's bullet thru the forehead and then you mentioned slave driving the phrase used by you is sheer mockery the works of the coalies on the great airfields of china was sheer pleasure the anzio beachead was a picnic for the boys carving out that tiny foothold the boys who spanned the plane under point blank fire were having an enjoyable time the guys who lugged ashore on their backs the supplies that helped to take tarawa were just getting some exercise no this was not slave driving work it was mere amusement as one might take back home on a quiet sunday afternoon and then you said under paid that is just plain riot the boys who were killed at pearl harbor were under paid the men at kiska and attu were under paid the boys who hit the beach of normandy were underpaid the maquis of france were under paid no according to you these men were making a fortune some will come back but is the stinking 50 a month overpaying a dead american private in the lonely mountains of italy is the service pay of a pilot too much of course he may come back but there is a chance he may be just charred remains in a wrecked plane he does not earn his money he is overpaid yes the boys who invade japan will be overpaid it is too bad that the legal profession cannot pay off like the services fighting this war yes we are all wealthy men according to your idea of being underpaid stan i have always respected you for your knowledge and ability but you seem to be so wrapped up in that smug little world of yours that you don't know what is going on in terms of reality you see newsreels read papers scan magazines and that makes you a judge of your position whether you know it or not you are a very lucky guy you have your education your job and future planned and then on top of that you have the audacity to write hard boiled slave driving under paid profession if this letter does nothing else i hope that it makes you ashamed of yourself right down to the marrow of your bones you may say now who is brown that he can pass judgment on the great lawyer granted to your way of thinking he is not in a position to do so i think differently i am a guy who only had three years in college i never graduated or went on to a professional school i know very little in the formal sense of the word but you ungrateful wretch i still know more about life than you ever will unless you change i have seen life in its rawest and crudest and death too for that matter yes my sheltered intellect the intellect the sordid and foul things of life can teach lessons i have learned things and learned to appreciate things that only the college of life can teach i don't regret this in fact i am proud of it and i think i will be a better person for all of it if you are half a man you will make some reply to what i have written above i realize that it may not be a finely phrased but the truth is not always finely phrased your obedient slave sgt richard h brown army air forces somewhere in the philippines edit i'm almost certain that i found sgt brown's obituary and i've identified a surviving daughter interestingly enough if it's the right obituary and the daughter is the person i'm thinking of i actually went to school with sgt brown's grandson for a few years and our families know each other having met at school functions in the past i'll be reaching out to sgt brown's daughter today to offer her these letters edit 2 left a voicemail on the only number i found on the daughter guess i can only wait and see edit 3 welp obligatory thanks for the gold i left another voicemail on another number i found waiting on a call back so unfortunately no real updates glad this meant so much to so many people though of course will update when i have one</td><td>history</td></tr><tr><th>48940</th><td>i'm being put off maths by the arrogance of others some context i live in england i'm 17 going into year 13 in september and was hoping to go to cambridge to study maths in 2020 however i attended a subject masterclass at the university this year and the overwhelming arrogance of the other students there infuriated me any time the lecturer would step from one point to the next in an argument there'd be a chorus of furious nodding from people who really wanted to show just how well they understood that step the same would come whenever a concept beyond the a level syllabus was mentioned even in passing or whenever the lecturer asked who had heard of such and such thing before at one point a guy at the front who was probably the worst offender on all counts interrupted the lecturer mid sentence to explain to everyone a method he knew of proving something that the lecturer was literally in the middle of explaining during a q a session with current cambridge students it was very clearly explained that there is no advantage to doing the maths a level a year early but you bet that didn't stop one guy from asking whether there was perchance an advantage to doing it two years early wink wink nod nod this arrogance isn't limited to cambridge obviously it pervades all of mathematics you need only go on stack exchange to see just how many people are waiting to tell you how dumb you are for not being born knowing that there exist functions that are smooth only at a single point in their domain it seems every maths person i talk to is just waiting to tell me how many certificates of distinction they've gotten from the british mathematical olympiad i can't stand it i don't care if you know what a stereographic projection is i didn't ask sorry for the long text post but i just wanted to talk to somebody about this i'm also not trying to attack the two people i mentioned above they just served as good examples</td><td>math</td></tr><tr><th>41895</th><td>feeling extremely social and happy after years of antisocial life style i did something new and it unlocked my social skill long story i have a very rough child hood growing up in a wealthy family but in a mostly not good school surrounded by poverty so i got bullied manipulated and outcasted by other kids i was a good son always follow the rule listen to my parents and such but uneducated kids were the only people i can be friend with and my parents never allowed me to make friends with them understandable so i was very lonely my trust to people was long gone because of that funny enough the only time i ever played the sims my character is exactly that follow rules never make big mistake never take risk died lonely anyhow at my work we had a late christmas party and also secret santa my first one ever the person that i randomly chose to gift to is a girl that i occasionally made eye contacts with kinda like her i have never given and received a physical gift before in my life and in the secret santa sheet she wrote nothing but i play soccer i forgot about it and last minute i bought a mug with roses on the inside and outside and filled it with chocolate wrapped it like a 2 years old and literally googled secret santa message and wrote a little note sticked it to the gift anyways after received the gift she and the others female co workers said that it is really cute multiple times for like 5 minutes after an hour she then discovered the chocolate inside and said something nice again i sat on the table next to them overheard it after hearing this from me sitting quiet and not talking to i'm the center of the party mode i started talking to the my co workers that i have never talked to for the 8 months i worked there it honestly felt incredible first time in a long time i don't have to think or analysie the conversation beforehand i made people interested in me i approached basically strangers i felt like that girl passively gave me a confident boost and it has been days since then i can feel it positively affecting my life my gifter gave me more than double the limit of 25 bucks i knew that he doesn't have a lot of money he's an old guy working minimum wage his whole life i work with him in the same department we didn't talk much at work other than a word here and there all this made me flattered and appreciate people around me way more before this i was a mess staying at home thinking nonsense all day wasting my life away but now all i want to do is interact with people and make new memories the best memories that i made last year were from random stranger right now i'm thinking of talking to the girl next week at work without preparation or scripting it out before in my head tl dr secret santa made me rethink my current situation and realized that somebody does appreciate me and as a result improve my social skill edit holy heck this blew up thanks everybody and thank you for gold stranger</td><td>socialskills</td></tr><tr><th>38421</th><td>last week i faced one of the worst fears a parent could ever face i watched my daughter be resuscitated after drowning in a pool there were three adults and 4 kids we were all busy putting on sun screen but we failed to notice that my oldest had wandered off towards the deep end fall in swallow water and sink to the bottom of the pool my brother in law noticed first that she was down there and dived right in and we started cpr right away while my brother in law's wife dialed 9 1 1 she started breathing 30 seconds after intense cpr and mouth to mouth she took a big breath vomited more water and started crying there was a wave of relief this could have gone so much worse the ambulance arrived shortly after and she was rushed to the hospital it took three days for her to finally get the all clear from the hospital along with a follow up with her normal pediatrician why three days pool chemicals have a way of irritating lungs and messing with little kids and there are secondary and tertiary effects from drowning such as dry drowning and pneumonia it took 36 hours after she was rushed to the hospital to be told that we were out of the woods and that we could breath a sigh of relief that she'd be ok with no long lasting physical effects one of us should have been watching the pool one of us should have been vigilant but we weren't as vigilant as we should have been too many assumptions about who was on point and the abilities of our kids were there for all of you parents out there who go on vacation or frequent pools enough don't be complacent in your vigilance of watching over your little ones all it takes is 1 second a brief turn away for one of them to go down into the pool and you won't even hear it we will from now on assign 1 adult as the water watcher we all know cpr so we can handle things should one of them go in and start sinking but had 1 of us been the water watcher we could have avoided it she's doing well and doesn't remember much but we've been keeping an eye on her not just with her physical state but her mental emotional state as well i don't think i will be the same after seeing that happen and facing my worst fear ever edit thank you kind stranger for the gold i also want to thank you for those who shared their stories it's traumatizing to say the least and i'm trying to not beat myself up over it but when you're in the hospital watching your little one struggle it's all you think about please take this story and other's stories to heart it happens but there are things that we as adults can do to help prevent it and to save lives if it does happen learn up on water safety assign the water watcher or hire a life guard become certified in cpr and brush up on your swimming skills because you never know when you'll need it my daughter wouldn't be with us today if we hadn't performed cpr as quickly as we did and had gotten her medical attention as quickly as we did</td><td>Parenting</td></tr><tr><th>27998</th><td>i want to check if you guys are interested in a ama with my grandmother she survived the japanese concentration camps in indonesia during wwii hi all last year i've seen a lot of redditors that let their grandparents have an ama mostly about their experiences in wwii but these stories are always from the europian western side although very interesting i've always felt that the asian side isn't told that much at least in my case we dutchies learn almost nothing about the history and culture of our former colonies like indonesia such imporant things happend there but people simply don't know anything about them my grandmother was born in indonesia during the '30 so i was lucky she could tell me wonderful stories relatively of course about everything she's experienced the struggles during the war being a half blood she and her entire family ended up in one of the concentration camps during the japanese occupation of the dutch east indies after that her immigration to the netherlands she was kicked out of her homeland and had to move to a new and strange country where they didn't exactly get welcomed they barely spoke the language of and had to survive with almost no posessions i thought her life story might give a unique angle on the past and if you guys would find it interesting i could arrange an ama on r iama let me hear your thoughts edit wow the response was much greater than i first anticipated thanks for your feedback i'll speak with my grandmother about this and i'll arrange the ama edit2 if people stuble to this edit the date's been arranged it will be comming saturday 30 04 probably around our midday i'm in the process running it through the official channels whereafter you'll hear about a more exact time edit3 saturday 30 04 '16 at 13 00 utc 2 i'll post a link here when it goes live edit4 https www reddit com r iama comments 4h44f2 i_am_a_83_year_old_dutchindonesian_grandmother</td><td>history</td></tr><tr><th>45564</th><td>i was generously gifted a complete harvard classics series and made a new friend in the process here is a picture of the whole set http imgur com a 6x8il7n i recently reached out to a local group asking if anyone perhaps inspired by the recent netflix release tidying up with marie kando might be looking to sell or re home classic literature i've been spending a lot of time reading after my recent loss and i realized that my bookshelves and thus my general knowledge of literature was really lacking the classics well i hit the jackpot a woman reached out saying she was looking to re home a full harvard classics set and not knowing what that was i did a quick google search i was amazed to find out that it covered such a vast array of subjects in modern times and even during it's creation it's not perfectly round or all encompassing but it's still totally wonderful i expected to have to pay for the books but when the woman called she told me that her grandfather abraham a brilliant man who couldn't afford to take time from work for college but loved learning purchased the books for his own educational purpose and would want nothing more than to give them to someone who would appreciate and actually read them that's me by the way i met her yesterday and spent some time learning about her amazing family we talked for over an hour about her grandfather and her mother her struggle with infertility my daughter and then my son who was diagnosed with a fatal condition early in my pregnancy i confided in her my fears of failing to succeed in grad school and how i feared even more failing to be a strong role model for my daughter while i was boxing books in her basement she wrote me a wonderful inspirational note and has really genuinely made an impact on my life not only did i get a perfectly wonderful set of classic books out of this but i've made a beautiful friend while i may never read all of these books i will enjoy what i do read and cherish the human compassion that brought them to my bookshelf edit yes the title should say given rather than gifted just understand that after a difficult few months this the books and the human connection felt like a gift to me so that's just the word i opted to use i understand that it wasn't a gift edit useful links list of books in the series https en m wikipedia org wiki harvard_classics project gutenberg link http www gutenberg org ebooks bookshelf 40 recommended reading order https www myharvardclassics com categories 20120612_1</td><td>books</td></tr><tr><th>37600</th><td>hi i'm a mom of a girl who is into math how do i not ruin it my daughter is almost six and she really enjoys math well counting and manipulating numbers i suppose that's really the only thing she's really encountered she always wants to read the math books we've gotten alice in numberland and other assorted things like that and really enjoys those a lot personally i've put almost zero time into mathematics because i convinced myself that i was horrible at it in high school here's what i'm scared of 1 other girls or teachers saying things like i hate math or that they're not good at it she went to school with her favorite color being black and came home with it a week later being pink sigh so she picks up what is important or unimportant to other people and wants to adapt herself to that 2 i know that there is actual math out there and not the things that students do in school however my underlying structure of math is extremely weak i'd love to introduce her to logic or patterns or whatever else would help her the most or ignite the most joy for her but i'm at a loss because i don't really know those things myself does anyone have any thoughts on these fears any games curricula videos or books that would help us erm math better what did you like doing when you were a kid in closing help thanks edit holy cow i just want to say thank you to everyone who has taken the time to give all these incredibly thoughtful responses i've read every single comment and will continue to do so and taken copious notes thank you for being kind enough to help out</td><td>math</td></tr><tr><th>23699</th><td>update am i overreacting my husband can t parent original post https www reddit com r parenting comments hp20kv am_i_overreacting_husband_cant_parent utm_source share utm_medium ios_app utm_name iossmf update thank you so much for so many amazing comments they have allowed me to step back and think constructively his behaviour last night was disgraceful i set the kids up with a tent on the rooftop deck it s secure so they had a very fun night away from the toxic energy inside this morning husband asked if we wanted to go to the park i did not want to be around him but adult problems are not for children so i pack them up to go we all wait by the door as he s strung out over the sofa watching videos i ask if he s ready he s the one who told us to get ready he gets up and heads to the bathroom so i say we will wait in the car we of course go to my car as he made it clear he doesn t want all three kids in the car he gets into his car and pulls up saying get in so i state i guess we will meet you there yes this was probably petty but i pull off and stop at the tim hortons for lemonades and a much needed coffee he follows and in the middle of the drive thru gets out and demands his children get out of the car his son says dad why does it matter and he says it matters to my name and turns to me and shouts watch your attitude i take my son through the drive thru and to a different park we chat and i apologize for the mess my son says what s his problem why s he being so mean i repeat how adult problems shouldn t be put upon kids and he has the right to be upset and i m here for him first always my husband ends up going to his ex s house with the kids and hanging out there while she s at work this is a huge boundary for me it s disrespectful to me to my son and our family it is wrong we ve been together 6 years him leaving my son out taking the kids away from him to go to his ex s taking them out of the car and leaving my son clearly made my son feel singled out and the comment yesterday about the car is enough i love my husband but never will i tolerate this the trouble or blessing with blended families is my husband will never come first my son does i choose him and i always will so i have told my husband he s not welcome here to stay away until i can gather myself and make an appropriate time for him to gather his belongings it is my home he is not on the title my husband made a choice today he walked out and in the process he hurt myself and more importantly my son there is consequences with that he will not be allowed back at this time i need time to process and time to brighten my sons environment thanks again for your support the comments and insight is helpful i will work on my sons independence and alongside counselling we will get through this</td><td>Parenting</td></tr><tr><th>13813</th><td>proud parenting moment my oldest daughter vera 8 has autism and selective mutism she is highly intelligent but socially she is lacking that made it hard to bond at first going back some years i was playing the sims and she came to sit down next to me pointing at things she would like to see placed in the house she wat building that went on for quite some while i would build a house and she would point at things she likes we wouldnt say a word we just sit down and build eventually i got a new laptop the old one was still working so i removed most of my files and stuff and it went to vera she could start playing the sims on her own however it got frustrating to her and she quit with crossed arms and puffed cheeks the people in the game have needs they need to work to eat to bond and she couldnt manage to keep them happy so i told her it was like a puzzle she loves puzzles and it improved but she still had moments of frustration anyway fast forward i got another game cities skylines basically the sims but with a city generally not too hard to fulfill all needs but traffic management is a hell you might have guessed it but vera wanted to try as well at first she got up to cities with around 5000 people and traffic would show problems she got frustrated and i help her then she got to 10 000 then to 20 000 but 50 000 was the one she was most stuck with so we continued puzzling for a few days occasionally try to fix things occasionally start over some days ago she suddenly came running into the living room like mommymommymommymommy and divehugged me on the couch that was her way to say that she made it to 50 000 people with 80 traffic rating which means traffic is flowing pretty well little moment i wanted to share</td><td>Parenting</td></tr><tr><th>204</th><td>don t be like this today was my son s 6th birthday last year none of his school friends came to his party just family and friends from work so we really put in extra effort this time we noted that last year we didn t give enough notice and my son didn t really get along with the other kids in the first place this year he spent all year focusing on making friends different group of kids than last year we sent out invites a month in advance with multiple reminders booked the venue got the party supplies decorated cupcakes the works we anticipated a lower turnout due to mother s day so we over invited and made the party noon to 2 thinking it would be after brunch or before a bbq typical mother s day activities we had 8 families rsvp that they would be there 18 kids the parents emailed me asking for gift ideas telling me how many siblings to expect saying how excited they were and all 8 families no showed i get that it s mother s day and yeah the weather wasn t great but would it kill you to send me a damn text message what am i supposed to tell my son despite the obvious disappointment my husband and i forced a smile and carried on like no big deal my son seemed to have a good time anyway until he realized all of the empty place settings when we did cake tldr if you rsvp yes to an event and then don t show up you re a jerk and i hate you update to all the people saying just pick a different day you've obviously never tried to plan a kid's party before all of the venues around here are booked solid for months sunday was the only day available and also happened to be his actual birthday if i had gotten only no rsvps or no responses i would have cancelled and picked a different party but since i got a respectable amount of positive rsvps i decided to keep it to everyone who suggested calling out the parents i decided to send them all a note that read something like this hey sorry we missed you at the party i hope everyone is feeling okay next time please send me a text to let me know if you won't make it son was really sad that child didn't make it and i didn't know what to tell him to everyone that made suggestions to improve future parties thank you i read every comment i think we will stop trying to have parties with the kids and just do a family event instead to everyone commenting on the cost total out of pocket ended up being about 300 for my family of 5 to spend an hour at the pool a little steep but we played it off as if we rented the whole place just for us and we had fun anyway silver lining we also took my son out to dinner at his favorite restaurant and today we had cupcakes for breakfast i have adorable mini sandwiches pre made for my lunches for the next two weeks and a surplus of disposable plates and cutlery for when i'm feeling lazy the 2 dozen roses that were not claimed by the moms of the guests became mine and now my office smells fantastic thanks for all the comments</td><td>Parenting</td></tr><tr><th>46137</th><td>i hate that i'm bad at math is the end of the conversation if you were with someone who could barely read the words on a menu at a restaurant and they responded casually with oh i'm just bad a reading that would be unacceptable you would be concerned about their education they don't have to love reading or be able to make out sloppy cursive writing but you'd expect them to have a certain level of competency in reading so that they do everyday tasks in middle school and high school i did horribly in math but my excuse was always i'm just bad at math not like kevin who's naturally gifted and pretty much everyone just let me get away with it even my own teachers didn't push me very hard it took me a long time to realize kevin was good at math because he practiced problems everyday for the same amount of time i read books it just seemed like the subject was one of those things you were either bad at or good at if you needed to practice it you were already a failure starting out way behind those naturally talented humans i've returned to college recently to pursue computer science basic algebra like 10 x 12 what is x used to be the bane of my existence now i'm in calculus and it still sucks but i can do it thanks to practice tutors and the internet but i can't help but think how much faster i could have gotten through this if my high school wasn't so quick to divide up students between bad at math lost cause and naturally gifted in math mostly ignore i wonder right now if there's a bunch of students starting their freshmen year whose struggle will be dismissed turning them away from the growing demand and high paying positions in stem related fields there are lot of problems with the u s and the maths and sciences but it starts with letting kids off the hook who excuse poor grades by saying i'm just bad at math those are the people who should be showered with resources extra focus on problem chapters reviewing failed tests more tutors better trained teachers more encouragement etc there are few things you can't do if you practice enough you may not be the best or most gifted but being average at something is way better than complete ignorance</td><td>math</td></tr><tr><th>29109</th><td>finally got rid of the tablet my son is 3 5 and has been addicted to youtube for the past 1 5 years my mother in law bought him a tablet against my wishes for his 2nd birthday i never wanted him to have one but soon after both my wife and i became used to the convenience of just letting him watch while we got things done around the house or if we went to the store he was quiet and would giggle at the videos it was cute back then however he eventually started to wake up each day and the first words out his mouth were tablet please and he would go to bed each night asking the same thing while he would fall asleep i noticed his behavior got worse and worse during this time and he would become very irritated at my wife and i if we wanted to do anything except let him watch youtube instead of simply asking he was demanding us to give it to him now i really began to hate him watching when i noticed that many of these supposed kid family focused channels are really just platforms for advertisers and contain very questionable content the unregulated nature is really my issue with it all i am perfectly fine with him watching tv streaming because i know the content on there at least has some semblance of a story life lessons or educational value and plus he doesn't know how the remote works yet so i have much more control over what he watches the straw that broke the camel's back for me however was about 2 months ago my wife woke up for work at 3 30 am she works 1st shift at a hospital and found our son in the kitchen hiding under the table eating a big bag of marshmallows and watching youtube his saving grace that night was that i didn't find him i honestly don't know what i would've done if i did because i'm sure i would've just have seen red i really started to limit tablet time to a minimum every day to ween him off at this point fast forward to this whole current quarantine situation about a week goes by of me working from home and him screaming for the tablet each and every day i finally said enough is enough and took it away cold turkey of course the first couple days were really rough but i quickly noticed him playing with his toys a lot more running around in our backyard wanting to play pretend and just be an imaginative young kid it's like a switch was flipped and i couldn't be happier for the both of us i have no plans of bringing it back out ever again and i'll be happy to let it collect dust until the end of time at this point now i know how tough it is to limit screen time but seeing what i'm seeing now with him i really wish i got rid of it sooner i can't recommend it enough to just go cold turkey it's gonna be really hard at first and you'll want to give in a lot but you gotta stay strong and power through believe me it's worth it</td><td>Parenting</td></tr><tr><th>9803</th><td>one evening me f31 and my fiancé m33 were planning our wedding then we went to sleep funeral tomorrow my fiancé was also a redditor therefore feel i have to post something here to do something as right now it is hard to figure out what last monday and the weekend before that were so amazing we went to see our dream apartment that we were planning to buy we went for lunch with his parents next day a brunch with his fraternity brothers and their spouses a beautiful ring on my finger wedding in august everyone so exicted he changed his job almost a year ago and on monday his first big project successfully went into production he was the hero of the day i had some impro classes that day so came home a bit late he in general was trying to live healthy to look his best for the wedding but felt like celebrating therefore went to mc donalds a glass of champagne in the evening a tost how awesome he is a cat in the lap that we took as kitten last easter as he tends to snore i usually go to sleep a bit earlier we sleep in different rooms tuesday morning i wake up and go to him for our morning cuddle he is cold blue blood through nose i panic call the ambulance then they call the police as he was just 33 i call his mom no real reason why forensics wrote that something with the heart but nothing precise as there was no crime no violence no poisoning nothing a young man just went to sleep and did not wake up planning the funeral that will happen tomorrow it will be at least twice as big as we were planning our wedding hard to believe that this is really happening tomorrow i will see him for the last time ever i m spending a lot of time with his parents he was their only son all their hopes and dreams were put in him i have no idea how our relationship will continue with them we all need each others support but i know that i cannot replace their son nothing and no one to really blame perhaps his ex girlfriend that was originally the love of his life ho just one day without mentioning a reason just left during their relationship i know that some drugs were involved so that probably fucked up his heart a bit more but since we met he has been using only some generic antidepressants and sometimes just a bit too much whiskey but nothing that could kill a 33 year old one thing that helps is the thought about moving out of my current apartment as it would feel too much to keep on living here i will be moving in with a good friend of mine therefore i will not be alone also i have to take care of the cats mine that is 10 years old and grumpy and his that is almost 1 year old that is just pure love and positive energy</td><td>TwoXChromosomes</td></tr></tbody></table>







 
 
 


















### Tech stack and links
More details about the technologies and tools that are used in this work can be found below.

- [HypoTweet](https://hypotweet.herokuapp.com)
- [Heroku](https://devcenter.heroku.com/)
- [Pipenv](https://pipenv.pypa.io/en/latest/)
- [Jinja2](https://jinja.palletsprojects.com/)
- [gunicorn](https://docs.gunicorn.org/)
- [SQLAlchemy](https://www.sqlalchemy.org/)
- [Tweepy](https://docs.tweepy.org/)
- [SciKit-Learn](https://scikit-learn.org/stable/getting_started.html)
- [spaCy](https://spacy.io/)
- [PostgreSQL](https://www.postgresql.org/)
- [Flask](https://flask.palletsprojects.com/)

